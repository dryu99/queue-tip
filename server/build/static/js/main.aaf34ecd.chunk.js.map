{"version":3,"sources":["enums.js","utils/logger.js","socket.js","components/Home.js","components/SignIn.js","components/User.js","components/Queue.js","components/TooltipWrapper.js","components/Users.js","components/Room.js","components/Error.js","App.js","index.js"],"names":["UserTypes","Object","freeze","ADMIN","BASIC","info","console","error","socket","io","emitDequeue","data","callback","emit","SocketEvents","DEQUEUE","JOIN","CREATE_ROOM","DISCONNECT","LEAVE","NEW_USER_JOIN","ROOM_CHECK","ENQUEUE","Home","setCurrentUserType","setRoomCallback","useState","newRoomName","setNewRoomName","history","useHistory","Container","className","Form","Row","Col","xs","Control","value","onChange","e","target","placeholder","Button","onClick","newRoom","newRoomId","uuidv4","trim","roomName","roomId","push","preventDefault","logger","variant","type","SignIn","user","room","setUser","addNewUser","addNewQueueUser","newName","setNewName","alertText","setAlertText","nameInputRef","React","createRef","useEffect","ReactDOM","findDOMNode","current","focus","Label","ref","Text","name","id","resData","usersInRoom","usersInQueue","User","isCurrentUser","isAdmin","colourClass","Queue","queueUsers","removeQueueUser","setInQueue","ListGroup","map","qu","i","listItemProps","action","userId","dequeuedUser","key","Item","TooltipWrapper","children","placement","text","OverlayTrigger","overlay","Tooltip","Users","users","length","u","listItem","Room","setUsers","setQueueUsers","inQueue","on","newUser","leftUser","removeUser","enqueuedUser","off","concat","filter","newQueueUser","isUserSignedIn","Fragment","dummy","document","createElement","body","appendChild","window","location","href","select","execCommand","removeChild","size","emitEnqueue","block","Error","App","currentUser","setCurrentUser","setRoom","roomError","setRoomError","match","useRouteMatch","params","path","exact","render","getElementById"],"mappings":"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","file":"static/js/main.aaf34ecd.chunk.js","sourcesContent":["export const UserTypes = Object.freeze({\n  ADMIN: 'admin',\n  BASIC: 'basic'\n});","const info = (...params) => {\n  // eslint-disable-next-line no-undef\n  if (process.env.NODE_ENV === 'development') {\n    console.log(...params);\n  }\n};\n\nconst event = (...params) => {\n  info('<EV> ', params);\n};\n\nconst error = (...params) => {\n  console.error(...params);\n};\n\nexport default { info, event, error };","import io from 'socket.io-client';\n\nconst socket = io();\n\nexport const emitCreateRoom = (newRoom, callback) => {\n  socket.emit(SocketEvents.CREATE_ROOM, newRoom, callback);\n};\n\nexport const emitCheckRoom = (roomId, callback) => {\n  socket.emit(SocketEvents.ROOM_CHECK, { roomId }, callback);\n};\n\nexport const emitEnqueue = (data, callback) => {\n  socket.emit(SocketEvents.ENQUEUE, data, callback);\n};\n\nexport const emitDequeue = (data, callback) => {\n  socket.emit(SocketEvents.DEQUEUE, data, callback);\n};\n\nexport const emitJoin = (data, callback) => {\n  socket.emit(SocketEvents.JOIN, data, callback);\n};\n\nexport const SocketEvents = Object.freeze({\n  JOIN: 'join',\n  CREATE_ROOM: 'create_room',\n  DISCONNECT: 'disconnect',\n  LEAVE: 'leave',\n  NEW_USER_JOIN: 'new_user_join',\n  ROOM_CHECK: 'room_check',\n  ENQUEUE: 'enqueue',\n  DEQUEUE: 'dequeue',\n});\n\nexport default socket;","import React, { useState, useEffect } from 'react';\nimport { Button, Container, Form, Col } from 'react-bootstrap';\nimport { v4 as uuidv4 } from 'uuid';\nimport { useHistory } from 'react-router-dom';\nimport { UserTypes } from '../enums';\nimport logger from '../utils/logger';\n\nimport { emitCreateRoom } from '../socket';\n\nconst Home = ({ setCurrentUserType, setRoomCallback }) => {\n  const [newRoomName, setNewRoomName] = useState('');\n\n  const history = useHistory();\n\n  const handleCreateRoomClick = (e) => {\n    const newRoomId = uuidv4();\n\n    if (newRoomId && newRoomName && newRoomName.trim() !== '') {\n      // users who create rooms are admins\n      setCurrentUserType(UserTypes.ADMIN);\n\n      // send a create room event to server\n      emitCreateRoom(\n        { roomName: newRoomName, roomId: newRoomId },\n        setRoomCallback\n      );\n\n      // route to room resource\n      history.push(`/room/${newRoomId}`);\n    } else {\n      e.preventDefault();\n      logger.error('error creating room');\n    }\n  };\n\n  return (\n    <Container className=\"mt-4\">\n      <h1 className=\"text-center mb-5\">queue-tip</h1>\n      <Form>\n        <Form.Row className=\"justify-content-center mb-3\">\n          <Col xs=\"auto\">\n            <Form.Control\n              value={newRoomName}\n              onChange={(e) => setNewRoomName(e.target.value)}\n              placeholder=\"Room Name\"\n            />\n          </Col>\n        </Form.Row>\n        <Form.Row className=\"justify-content-center\">\n          <Col xs=\"auto\">\n            <Button onClick={handleCreateRoomClick} variant=\"primary\" type=\"submit\">Create Room</Button>\n          </Col>\n        </Form.Row>\n      </Form>\n    </Container>\n  );\n};\n\nexport default Home;","import React, { useState, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport { Button, Container, Form, Col } from 'react-bootstrap';\nimport { emitJoin } from '../socket';\nimport logger from '../utils/logger';\n\nconst SignIn = ({ user, room, setUser, addNewUser, addNewQueueUser }) => {\n  const [newName, setNewName] = useState('');\n  const [alertText, setAlertText] = useState('');\n\n  // keep track of input component so we can focus on it\n  const nameInputRef = React.createRef();\n\n  // if popup is visible, focus on name input component\n  useEffect(() => {\n    // eslint-disable-next-line react/no-find-dom-node\n    ReactDOM.findDOMNode(nameInputRef.current).focus();\n\n  }, [nameInputRef]);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    emitJoin({ name: newName, type: user.type, roomId: room.id }, (resData) => {\n      const { user, usersInRoom, usersInQueue, error } = resData;\n      logger.info('acknowledged from JOIN event', user);\n\n      if (!error) {\n        setUser(user);\n        addNewUser([...usersInRoom, user]);\n        addNewQueueUser(usersInQueue);\n      } else {\n        logger.error(error);\n        setAlertText('Name is already taken, please try something else.');\n      }\n    });\n  };\n\n  return (\n    <Container className=\"mt-4\">\n      <h1 className=\"text-center mb-5\">Sign In</h1>\n      <Form>\n        <Form.Row className=\"justify-content-center mb-3\">\n          <Col xs=\"auto\">\n            <Form.Label>Your Name</Form.Label>\n            <Form.Control\n              ref={nameInputRef}\n              value={newName}\n              onChange={(e) => setNewName(e.target.value)}\n              placeholder=\"Gregor Kiczales\"\n            />\n          </Col>\n          <Form.Text className=\"text-muted\">\n            {alertText}\n          </Form.Text>\n        </Form.Row>\n        <Form.Row className=\"justify-content-center\">\n          <Col xs=\"auto\">\n            <Button\n              onClick={handleSubmit}\n              variant=\"primary\"\n              type=\"submit\"\n            >\n              Enter Room\n            </Button>\n          </Col>\n        </Form.Row>\n      </Form>\n    </Container>\n  );\n};\n\nexport default SignIn;","import React from 'react';\nimport { UserTypes } from '../enums';\n\nconst User = ({ user, isCurrentUser }) => {\n  const isAdmin = user.type === UserTypes.ADMIN;\n  const colourClass = isAdmin\n    ? 'text-danger'\n    : isCurrentUser\n      ? 'text-primary'\n      : '';\n\n  return (\n    <span className={colourClass}>\n      {user.name} {isAdmin ? '(admin)' : ''}\n    </span>\n  );\n};\n\nexport default User;","import React from 'react';\nimport { Row, Col, Container, ListGroup } from 'react-bootstrap';\nimport { UserTypes } from '../enums';\nimport User from './User';\nimport { emitDequeue } from '../socket';\nimport logger from '../utils/logger';\n\nconst Queue = ({ room, user, queueUsers, removeQueueUser, setInQueue }) => {\n\n  const removeUserFromQueue = (e, userId) => {\n    emitDequeue({ userId, roomId: room.id }, (data) => {\n      logger.info('acknowledged from DEQUEUE event', data.dequeuedUser);\n      removeQueueUser(data.dequeuedUser.id);\n\n      if (data.dequeuedUser.id === user.id) {\n        setInQueue(false);\n      }\n    });\n  };\n\n  return (\n    <div >\n      <h4>Queue</h4>\n      <ListGroup>\n        {queueUsers.map((qu, i) => {\n          const isCurrentUser = user.name === qu.name;\n          const isAdmin = user.type === UserTypes.ADMIN;\n\n          const listItemProps = {\n            // variant: isCurrentUser ? 'secondary' : null,\n            action: isAdmin ? true : false,\n            onClick: isAdmin ? (e) => removeUserFromQueue(e, qu.id) : null\n          };\n\n          return (\n            <Container key={qu.id}>\n              <Row className=\"align-items-center\">\n                <Col xs=\"auto\">\n                  <b>{i + 1}</b>\n                </Col>\n                <Col>\n                  <ListGroup.Item {...listItemProps}>\n                    <User user={qu} isCurrentUser={isCurrentUser}/>\n                  </ListGroup.Item>\n                </Col>\n              </Row>\n            </Container>\n          );\n        })}\n      </ListGroup>\n    </div>\n  );\n};\n\nexport default Queue;\n\n","import React from 'react';\nimport { OverlayTrigger, Tooltip } from 'react-bootstrap';\n\nconst TooltipWrapper = ({ children, placement, text }) => {\n  return (\n    <OverlayTrigger\n      placement={placement}\n      overlay={\n        <Tooltip>{text}</Tooltip>\n      }\n    >\n      {children}\n    </OverlayTrigger>\n  );\n};\n\nexport default TooltipWrapper;","import React from 'react';\nimport { ListGroup } from 'react-bootstrap';\nimport User from './User';\nimport TooltipWrapper from './TooltipWrapper';\n\nconst Users = ({ user, users }) => {\n\n  return (\n    <div>\n      <h4>Users: {users.length}</h4>\n      <ListGroup>\n        {users.map(u => {\n          const isCurrentUser = user.name === u.name;\n\n          const listItemProps = {\n            // variant: isCurrentUser ? 'secondary' : null,\n            action: isCurrentUser ? true : false,\n          };\n\n          const listItem = (\n            <ListGroup.Item key={u.id} {...listItemProps}>\n              <User user={u} isCurrentUser={isCurrentUser}/>\n            </ListGroup.Item>\n          );\n\n          return (\n            isCurrentUser ?\n              <TooltipWrapper\n                key={u.id}\n                placement=\"left\"\n                text=\"You!\">\n                {listItem}\n              </TooltipWrapper>\n              :\n              listItem\n          );\n        })}\n      </ListGroup>\n    </div>\n  );\n};\n\nexport default Users;","import React, { useState, useEffect } from 'react';\nimport { Col, Container, Row, Button } from 'react-bootstrap';\nimport socket, { SocketEvents, emitEnqueue, emitDequeue } from '../socket';\nimport logger from '../utils/logger';\n\nimport SignIn from './SignIn';\nimport Queue from './Queue';\nimport Users from './Users';\n\nconst Room = ({ room, user, setUser }) => {\n  const [users, setUsers] = useState([]);\n  const [queueUsers, setQueueUsers] = useState([]);\n  const [inQueue, setInQueue] = useState(false);\n\n  // subscribe to relevant socket events\n  useEffect(() => {\n    // when another user joins, add them to user list\n    socket.on(SocketEvents.NEW_USER_JOIN, ({ newUser }) => {\n      logger.info('received JOIN event', newUser);\n      addNewUser(newUser);\n    });\n\n    // when another user leaves, remove them from user list\n    socket.on(SocketEvents.LEAVE, ({ leftUser }) => {\n      logger.info('received LEAVE event', leftUser);\n      removeUser(leftUser.id);\n      removeQueueUser(leftUser.id);\n    });\n\n    // when another user joins queue, add them to queue list\n    socket.on(SocketEvents.ENQUEUE, ({ enqueuedUser }) => {\n      logger.info('received ENQUEUE event', enqueuedUser);\n      addNewQueueUser(enqueuedUser);\n    });\n\n    // when another user joins queue, add them to queue list\n    socket.on(SocketEvents.DEQUEUE, ({ dequeuedUser }) => {\n      logger.info('received DEQUEUE event', dequeuedUser);\n      removeQueueUser(dequeuedUser.id);\n\n      if (dequeuedUser.id === user.id) {\n        setInQueue(false);\n      }\n    });\n\n    // on component unmount, disconnect and turn off socket\n    return () => {\n      socket.emit(SocketEvents.DISCONNECT, 'testtesttest');\n      socket.off();\n    };\n  }, [users, queueUsers]);\n\n  const addNewUser = (newUser) => {\n    setUsers(users.concat(newUser));\n  };\n\n  const removeUser = (id) => {\n    setUsers(users.filter(u => u.id !== id));\n  };\n\n  const addNewQueueUser = (newQueueUser) => {\n    setQueueUsers(queueUsers.concat(newQueueUser));\n  };\n\n  const removeQueueUser = (id) => {\n    setQueueUsers(queueUsers.filter(u => u.id !== id));\n  };\n\n\n  const copyLinkToClipboard = (e) => {\n    // TODO manipulating DOM here directly feels sketchy, doing it the react way doesn't work see comments below\n    var dummy = document.createElement('textarea');\n    document.body.appendChild(dummy);\n    dummy.value = window.location.href;\n    dummy.select();\n    document.execCommand('copy');\n    document.body.removeChild(dummy);\n  };\n\n  const handleQueueToggle = (e) => {\n    if (inQueue) {\n      emitDequeue({ userId: user.id, roomId: room.id }, (data) => {\n        logger.info('acknowledged from DEQUEUE event', data.dequeuedUser);\n        removeQueueUser(data.dequeuedUser.id);\n        setInQueue(false);\n      });\n    } else {\n      emitEnqueue({ user, roomId: room.id }, (data) => {\n        logger.info('acknowledged from ENQUEUE event', data.enqueuedUser);\n        addNewQueueUser(data.enqueuedUser);\n        setInQueue(true);\n      });\n    }\n  };\n\n  // user is considered signed in when name and id exist\n  const isUserSignedIn = user && user.name && user.id;\n\n  return (\n    <Container className=\"mt-4\">\n      {room && isUserSignedIn ?\n        <React.Fragment>\n          <Row>\n            <Col>\n              <h1>{room.name}</h1>\n            </Col>\n            <Col xs=\"auto\">\n              <Button onClick={copyLinkToClipboard} size=\"lg\" variant=\"secondary\">\n                Copy Link\n              </Button>\n            </Col>\n            <Col xs=\"3\">\n              <Button onClick={handleQueueToggle} size=\"lg\" block>\n                {inQueue ? 'Leave Queue' : 'Join Queue'}\n              </Button>\n            </Col>\n          </Row>\n          <hr/>\n          <Row>\n            <Col>\n              <Queue\n                room={room}\n                user={user}\n                queueUsers={queueUsers}\n                removeQueueUser={removeQueueUser}\n                setInQueue={setInQueue}\n              />\n            </Col>\n            <Col xs=\"3\">\n              <Users user={user} users={users} />\n            </Col>\n          </Row>\n        </React.Fragment>\n        :\n        <SignIn\n          room={room}\n          user={user}\n          setUser={setUser}\n          addNewUser={addNewUser}\n          addNewQueueUser={addNewQueueUser}\n        />\n      }\n      {/* strangely enough, doing this doesn't work for copying to clipboard - setting display to none causes the copied value to be \"window.location.href\" */}\n      {/* <textarea ref={linkRef} style={{ display: 'none' }} value={window.location.href}/> */}\n    </Container>\n  );\n};\n\nexport default Room;","import React from 'react';\n\nconst Error = ({ text }) => {\n  return (\n    <div>\n      {text}\n    </div>\n  );\n};\n\nexport default Error;","import React, { useEffect, useState } from 'react';\nimport Home from './components/Home';\nimport Room from './components/Room';\nimport Error from './components/Error';\nimport logger from './utils/logger';\n\nimport {\n  Switch,\n  Route,\n  useRouteMatch\n} from 'react-router-dom';\n\nimport { emitCheckRoom } from './socket';\nimport { UserTypes } from './enums';\n\nfunction App() {\n  const [currentUser, setCurrentUser] = useState({ type: UserTypes.BASIC });\n  const [room, setRoom] = useState(null);\n  const [roomError, setRoomError] = useState(null);\n\n  const match = useRouteMatch('/room/:id');\n\n  // if user entered via link, check to see if specified room id exists and init room\n  useEffect(() => {\n    if (match && !room) {\n      logger.info('emitting room check event');\n      emitCheckRoom(match.params.id, setRoomCallback);\n    }\n  }, [match, room]);\n\n  const setCurrentUserType = (type) => {\n    setCurrentUser({ ...currentUser, type });\n  };\n\n  // socket event acknowledgement callback\n  const setRoomCallback = (resData) => {\n    const { room, error } = resData;\n    logger.info('room event acknowledged', room);\n    if (room && !error) {\n      setRoom(room);\n    } else {\n      logger.info(error);\n      setRoomError('sorry room doesn\\'t exist...');\n    }\n  };\n\n  return (\n    <Switch className=\"mt-4\">\n      <Route path=\"/room/:id\">\n        {!roomError ?\n          <Room room={room} user={currentUser} setUser={setCurrentUser}/>\n          :\n          // would be nice to put a spinner or sth here\n          <Error text={roomError}/>\n        }\n      </Route>\n      <Route exact path=\"/\">\n        <Home\n          setCurrentUserType={setCurrentUserType}\n          setRoomCallback={setRoomCallback}\n        />\n      </Route>\n      <Route>\n        <Error text=\"404 resource not found\"/>\n      </Route>\n    </Switch>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nimport {\n  BrowserRouter as Router\n} from 'react-router-dom';\n\nReactDOM.render(\n  <Router>\n    <App />\n  </Router>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}
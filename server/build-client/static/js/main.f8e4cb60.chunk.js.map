{"version":3,"sources":["utils/logger.js","socket.js","components/Home.js","components/TooltipWrapper.js","components/RoomName.js","components/RoomActions.js","components/User.js","components/Queue.js","components/AdminPopup.js","components/Room.js","components/Error.js","components/NavHeader.js","App.js","index.js","assets/copy-link.png","assets/crown.png"],"names":["console","error","socket","io","SocketEvents","Object","freeze","JOIN","CREATE_ROOM","DISCONNECT","ROOM_CHECK","ENQUEUE","DEQUEUE","TRY_ADMIN_STATUS","Home","setIsAdmin","setRoom","setRoomError","useState","newRoomName","setNewRoomName","newAdminPassword","setNewAdminPassword","alertText","setAlertText","history","useHistory","Container","className","Form","Row","Col","xs","Label","Control","value","onChange","e","target","placeholder","Text","Button","onClick","newRoom","callback","preventDefault","trim","length","logger","name","adminPassword","resData","room","push","id","emit","variant","type","TooltipWrapper","children","placement","text","OverlayTrigger","overlay","Tooltip","RoomName","src","copyLinkIcon","alt","dummy","document","createElement","body","appendChild","window","location","href","select","execCommand","removeChild","RoomActions","currentName","setCurrentName","isAdmin","setAdminPopupOpen","queuedUsers","joinQueue","data","alert","find","u","toLowerCase","roomId","currentNameJSON","JSON","stringify","localStorage","setItem","onSubmit","inline","InputGroup","Prepend","style","opacity","crownIcon","size","block","User","user","Queue","removeUserFromQueue","username","ListGroup","map","i","listItemProps","action","key","Item","AdminPopup","show","setAdminPassword","passwordInputRef","React","createRef","useEffect","current","focus","handleClose","submitAdminPassword","Modal","onHide","Body","ref","Footer","Room","setQueuedUsers","adminPopupOpen","on","enqueuedUser","concat","dequeuedUser","filter","m","off","userJSON","getItem","currentNameData","parse","Error","NavHeader","Navbar","bg","Brand","App","roomError","match","useRouteMatch","params","path","Spinner","animation","role","exact","ReactDOM","render","getElementById","module","exports"],"mappings":"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","file":"static/js/main.f8e4cb60.chunk.js","sourcesContent":["const info = (...params) => {\n  // eslint-disable-next-line no-undef\n  if (process.env.NODE_ENV === 'development') {\n    console.log(...params);\n  }\n};\n\nconst error = (...params) => {\n  console.error(...params);\n};\n\nexport default { info, error };","import io from 'socket.io-client';\n\nconst socket = io();\n\nexport const emitCreateRoom = (newRoom, callback) => {\n  socket.emit(SocketEvents.CREATE_ROOM, newRoom, callback);\n};\n\nexport const emitCheckRoom = (roomId, callback) => {\n  socket.emit(SocketEvents.ROOM_CHECK, { roomId }, callback);\n};\n\nexport const emitEnqueue = (data, callback) => {\n  socket.emit(SocketEvents.ENQUEUE, data, callback);\n};\n\nexport const emitDequeue = (data, callback) => {\n  socket.emit(SocketEvents.DEQUEUE, data, callback);\n};\n\nexport const emitJoin = (data, callback) => {\n  socket.emit(SocketEvents.JOIN, data, callback);\n};\n\nexport const emitTryAdminStatus = (data, callback) => {\n  socket.emit(SocketEvents.TRY_ADMIN_STATUS, data, callback);\n};\n\nexport const SocketEvents = Object.freeze({\n  JOIN: 'join',\n  CREATE_ROOM: 'create_room',\n  DISCONNECT: 'disconnect',\n  ROOM_CHECK: 'room_check',\n  ENQUEUE: 'enqueue',\n  DEQUEUE: 'dequeue',\n  TRY_ADMIN_STATUS: 'try_admin_status'\n});\n\nexport default socket;","import React, { useState } from 'react';\nimport { Button, Container, Form, Col } from 'react-bootstrap';\nimport { useHistory } from 'react-router-dom';\nimport logger from '../utils/logger';\n\nimport { emitCreateRoom } from '../socket';\n\nconst Home = ({ setIsAdmin, setRoom, setRoomError }) => {\n  const [newRoomName, setNewRoomName] = useState('');\n  const [newAdminPassword, setNewAdminPassword] = useState('');\n  const [alertText, setAlertText] = useState('');\n\n  const history = useHistory();\n\n  const handleCreateRoomClick = (e) => {\n    e.preventDefault();\n\n    if (newRoomName.trim().length === 0) {\n      setAlertText('Please type in a room name!');\n    } else if (newAdminPassword.trim().length === 0) {\n      setAlertText('Please type in an admin password!');\n    } else {\n      // users who create rooms are admins\n      setIsAdmin(true);\n\n      // create room on server, set room on client and enter room if it does\n      logger.info('emitting room creation event');\n      emitCreateRoom({ name: newRoomName, adminPassword: newAdminPassword }, (resData) => {\n        const { room, error } = resData;\n\n        if (room && !error) {\n          setRoom(room);\n\n          // go to room url\n          history.push(`/room/${room.id}`);\n        } else {\n          logger.error(error);\n          setRoomError('Sorry room doesn\\'t exist...');\n        }\n      });\n    }\n  };\n\n  return (\n    <Container className=\"mt-4\">\n      <Form>\n        <Form.Row className=\"justify-content-center mb-3\">\n          <Col xs=\"auto\">\n            <Form.Label>Room Name</Form.Label>\n            <Form.Control\n              value={newRoomName}\n              onChange={(e) => setNewRoomName(e.target.value)}\n              placeholder=\"CPSC 110 Office Hours\"\n            />\n          </Col>\n        </Form.Row>\n        <Form.Row className=\"justify-content-center mb-3\">\n          <Col xs=\"auto\">\n            <Form.Label>Admin Password</Form.Label>\n            <Form.Control\n              value={newAdminPassword}\n              onChange={(e) => setNewAdminPassword(e.target.value)}\n            />\n          </Col>\n        </Form.Row>\n        <Form.Row className=\"justify-content-center mb-2\">\n          <Col xs=\"auto\">\n            <Form.Text className=\"text-muted\">\n              {alertText}\n            </Form.Text>\n          </Col>\n        </Form.Row>\n        <Form.Row className=\"justify-content-center\">\n          <Col xs=\"auto\">\n            <Button\n              onClick={handleCreateRoomClick}\n              variant=\"primary\"\n              type=\"submit\"\n            >\n              Create Room\n            </Button>\n          </Col>\n        </Form.Row>\n      </Form>\n    </Container>\n  );\n};\n\nexport default Home;","import React from 'react';\nimport { OverlayTrigger, Tooltip } from 'react-bootstrap';\n\nconst TooltipWrapper = ({ children, placement, text }) => {\n  return (\n    <OverlayTrigger\n      placement={placement}\n      overlay={\n        <Tooltip>{text}</Tooltip>\n      }\n    >\n      {children}\n    </OverlayTrigger>\n  );\n};\n\nexport default TooltipWrapper;","import React from 'react';\nimport TooltipWrapper from './TooltipWrapper';\n\nimport copyLinkIcon from '../assets/copy-link.png';\n\nconst RoomName = ({ room }) => {\n\n  const copyLinkToClipboard = () => {\n    // TODO manipulating DOM here directly feels sketchy, doing it the react way doesn't work see comments below\n    var dummy = document.createElement('textarea');\n    document.body.appendChild(dummy);\n    dummy.value = window.location.href;\n    dummy.select();\n    document.execCommand('copy');\n    document.body.removeChild(dummy);\n  };\n\n  return (\n    <div>\n      <h1 className=\"d-inline-block\">{room.name}</h1>\n      <TooltipWrapper text=\"copy url\">\n        <img\n          id=\"copy-link-icon\"\n          className=\"align-baseline mx-2\"\n          src={copyLinkIcon}\n          alt=\"copy-link-icon\"\n          onClick={copyLinkToClipboard}\n        />\n      </TooltipWrapper>\n    </div>\n  );\n};\n\nexport default RoomName;","import React from 'react';\nimport { Container, Form, InputGroup, Button, Row, Col } from 'react-bootstrap';\nimport TooltipWrapper from './TooltipWrapper';\n\nimport logger from '../utils/logger';\nimport { emitEnqueue } from '../socket';\n\nimport crownIcon from '../assets/crown.png';\n\nconst RoomActions = ({ currentName, setCurrentName, isAdmin, setAdminPopupOpen, queuedUsers, room }) => {\n\n  const joinQueue = (e) => {\n    e.preventDefault();\n\n    if (currentName.trim().length === 0) {\n      alert('Name can\\'t be empty if you want to join queue! Please type something in.');\n    } else {\n      const exisitingQueueUser = queuedUsers.find(u => u.name.toLowerCase() === currentName.toLowerCase());\n      if (exisitingQueueUser) {\n      // TODO make this a pretty modal\n        alert('You\\'re already in queue! Can\\'t join again.');\n      } else {\n        emitEnqueue({ name: currentName, roomId: room.id }, (resData) => {\n          logger.info('acknowledged from ENQUEUE event', resData);\n\n          // cache current name data\n          logger.info('caching current user data...');\n          const currentNameJSON = JSON.stringify({ value: currentName });\n          localStorage.setItem('currentNameData', currentNameJSON);\n        });\n      }\n    }\n  };\n\n  return (\n    <Container className=\"my-4\">\n      <Row>\n        <Col>\n          <Form onSubmit={joinQueue} inline>\n            <InputGroup className=\"pt-1\">\n              <InputGroup.Prepend>\n                <InputGroup.Text>Name</InputGroup.Text>\n              </InputGroup.Prepend>\n              <Form.Control\n                value={currentName}\n                onChange={(e) => setCurrentName(e.target.value)}\n                placeholder=\"Mr. Recursion\"\n              />\n              <TooltipWrapper text={isAdmin ? 'you\\'re admin!' : 'make admin'}>\n                <img\n                  id=\"crown-icon\"\n                  className=\"align-baseline mx-2 \"\n                  style={{ opacity: isAdmin ? 1 : null }}\n                  src={crownIcon}\n                  alt=\"crown-icon\"\n                  onClick={!isAdmin ? () => setAdminPopupOpen(true) : null}\n                />\n              </TooltipWrapper>\n            </InputGroup>\n          </Form>\n        </Col>\n        <Col xs=\"auto\">\n          <Button\n            onClick={joinQueue}\n            size=\"lg\"\n            block\n          >\n            Join Queue\n          </Button>\n        </Col>\n      </Row>\n    </Container>\n  );\n};\n\nexport default RoomActions;","import React from 'react';\n\nconst User = ({ user }) => {\n  return (\n    <span>\n      {user.name}\n    </span>\n  );\n};\n\nexport default User;","import React from 'react';\nimport { Row, Col, Container, ListGroup } from 'react-bootstrap';\nimport User from './User';\nimport { emitDequeue } from '../socket';\nimport logger from '../utils/logger';\n\nconst Queue = ({ room, isAdmin, queuedUsers, currentName }) => {\n\n  const removeUserFromQueue = (e, username) => {\n    emitDequeue({ username, roomId: room.id }, (resData) => {\n      logger.info('DEQUEUE event acknowledged', resData);\n    });\n  };\n\n  return (\n    <div >\n      <h4>Queue</h4>\n      <ListGroup>\n        {queuedUsers.map((u, i) => {\n          const isCurrentUser = currentName === u.name;\n\n          const listItemProps = {\n            variant: isCurrentUser ? 'primary' : null,\n            action: isAdmin ? true : false,\n            onClick: isAdmin ? (e) => removeUserFromQueue(e, u.name) : null\n          };\n\n          return (\n            <Container key={u.name}>\n              <Row className=\"align-items-center\">\n                <Col xs=\"auto\">\n                  <b>{i + 1}</b>\n                </Col>\n                <Col>\n                  <ListGroup.Item {...listItemProps}>\n                    <User user={u} />\n                  </ListGroup.Item>\n                </Col>\n              </Row>\n            </Container>\n          );\n        })}\n      </ListGroup>\n    </div>\n  );\n};\n\nexport default Queue;\n\n","import React, { useState, useEffect } from 'react';\nimport { Button, Form, Modal } from 'react-bootstrap';\nimport { emitTryAdminStatus } from '../socket';\nimport logger from '../utils/logger';\n\n\nconst AdminPopup = ({ show, setAdminPopupOpen, setIsAdmin, room }) => {\n  const [adminPassword, setAdminPassword] = useState('');\n  const [alertText, setAlertText] = useState('');\n\n  // keep track of input component so we can focus on it\n  const passwordInputRef = React.createRef();\n\n  // on popup render, focus on name input component\n  useEffect(() => {\n    // eslint-disable-next-line react/no-find-dom-node\n    if (passwordInputRef.current) {\n      passwordInputRef.current.focus();\n    }\n  }, [passwordInputRef]);\n\n  const handleClose = () => {\n    setAdminPassword('');\n    setAlertText('');\n    setAdminPopupOpen(false);\n  };\n\n  const submitAdminPassword = (e) => {\n    e.preventDefault();\n    emitTryAdminStatus({ adminPassword, roomId: room.id }, (resData) => {\n      logger.info('acknowledged from TRY ADMIN STATUS event', resData);\n\n      if (!resData.error) {\n        setIsAdmin(true);\n        handleClose();\n      } else {\n        logger.error(resData.error);\n        setAlertText('Password is incorrect! Please try again.');\n      }\n    });\n  };\n\n  return (\n    <>\n      <Modal show={show} onHide={handleClose}>\n        <Modal.Body>\n          <Form onSubmit={submitAdminPassword}>\n            <Form.Row className=\"mb-2\">\n              <Form.Label>Admin Password</Form.Label>\n              <Form.Control\n                ref={passwordInputRef}\n                value={adminPassword}\n                onChange={(e) => setAdminPassword(e.target.value)}\n                type=\"password\"\n              />\n            </Form.Row>\n          </Form>\n          <Form.Row className=\"justify-content-center\">\n            <Form.Text className=\"text-muted\">\n              {alertText}\n            </Form.Text>\n          </Form.Row>\n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={handleClose}>\n            Close\n          </Button>\n          <Button variant=\"primary\" onClick={submitAdminPassword}>\n            Submit\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    </>\n  );\n};\n\nexport default AdminPopup;","import React, { useState, useEffect } from 'react';\nimport { Container } from 'react-bootstrap';\nimport socket, { SocketEvents, emitJoin } from '../socket';\nimport logger from '../utils/logger';\n\nimport RoomName from './RoomName';\nimport RoomActions from './RoomActions';\nimport Queue from './Queue';\nimport AdminPopup from './AdminPopup';\n\nimport './room.css';\n\nconst Room = ({ isAdmin, setIsAdmin, room, queuedUsers, setQueuedUsers }) => {\n  const [currentName, setCurrentName] = useState('');\n  const [adminPopupOpen, setAdminPopupOpen] = useState(false);\n\n  // subscribe to relevant socket events\n  useEffect(() => {\n    // when another user joins queue, add them to queue list\n    socket.on(SocketEvents.ENQUEUE, ({ enqueuedUser }) => {\n      logger.info('received ENQUEUE event', enqueuedUser);\n      setQueuedUsers(queuedUsers.concat(enqueuedUser));\n    });\n\n    // when another user leaves queue, remove from to queue list\n    socket.on(SocketEvents.DEQUEUE, ({ dequeuedUser }) => {\n      logger.info('received DEQUEUE event', dequeuedUser);\n      setQueuedUsers(queuedUsers.filter(m => m.name !== dequeuedUser.name));\n    });\n\n    // on component unmount, disconnect and turn off socket\n    return () => {\n      socket.emit(SocketEvents.DISCONNECT);\n      socket.off();\n    };\n  }, [queuedUsers, room]);\n\n  // emit relevant socket events\n  useEffect(() => {\n    // let server know that new connection has joined this room\n    emitJoin({ roomId: room.id }, (resData) => {\n      logger.info('acknowledged from JOIN event', resData);\n    });\n  }, [room]);\n\n  // check cache for current name data\n  useEffect(() => {\n    logger.info('checking local cache for signed in user data...');\n    const userJSON = localStorage.getItem('currentNameData');\n\n    if (userJSON) {\n      logger.info('found data in local cache!');\n      const currentNameData = JSON.parse(userJSON);\n      logger.info(currentNameData);\n\n      if (currentNameData.value) {\n        setCurrentName(currentNameData.value);\n      }\n    }\n  }, []);\n\n  return (\n    <>\n      <Container className=\"mt-4\">\n        <RoomName room={room}/>\n        <hr/>\n        <RoomActions\n          currentName={currentName}\n          setCurrentName={setCurrentName}\n          isAdmin={isAdmin}\n          setAdminPopupOpen={setAdminPopupOpen}\n          room={room}\n          queuedUsers={queuedUsers}\n        />\n        <hr/>\n        <Queue\n          room={room}\n          isAdmin={isAdmin}\n          currentName={currentName}\n          queuedUsers={queuedUsers}\n        />\n      </Container>\n      <AdminPopup\n        show={adminPopupOpen}\n        room={room}\n        setIsAdmin={setIsAdmin}\n        setAdminPopupOpen={setAdminPopupOpen}\n      />\n    </>\n  );\n};\n\nexport default Room;","import React from 'react';\n\nconst Error = ({ text }) => {\n  return (\n    <div className=\"mt-5\">\n      <h2 className=\"text-center\">{text}</h2>\n    </div>\n  );\n};\n\nexport default Error;","import React from 'react';\nimport { Navbar } from 'react-bootstrap';\n\nconst NavHeader = () => {\n  return (\n    <Navbar className=\"\" bg=\"dark\" variant=\"dark\">\n      <Navbar.Brand className=\"mr-auto\" href=\"/\">Queue-Tip</Navbar.Brand>\n      <small className=\"text-muted\">\n        <a href={'https://en.wikipedia.org/wiki/Daniel_(Elton_John_song)'}>Daniel Ryu</a> 2020\n      </small>\n    </Navbar>\n  );\n};\n\nexport default NavHeader;","import React, { useEffect, useState } from 'react';\nimport { Spinner } from 'react-bootstrap';\nimport {\n  Switch,\n  Route,\n  useRouteMatch\n} from 'react-router-dom';\n\nimport Home from './components/Home';\nimport Room from './components/Room';\nimport Error from './components/Error';\nimport NavHeader from './components/NavHeader';\n\nimport { emitCheckRoom } from './socket';\nimport logger from './utils/logger';\n\nfunction App() {\n  const [room, setRoom] = useState(null);\n  const [queuedUsers, setQueuedUsers] = useState([]);\n  const [roomError, setRoomError] = useState(null);\n  const [isAdmin, setIsAdmin] = useState(false);\n\n  const match = useRouteMatch('/room/:id');\n\n  /**\n   * If user entered via link:\n   *   1) check to see if specified room id exists, if so init room and queue.\n   *   2) if room exists, check local storage for cached user data and try to join room\n   */\n  useEffect(() => {\n    if (match && !room) {\n      logger.info('emitting room check event');\n\n      // check to see if room exists on server, if so set room and queued users on client\n      emitCheckRoom(match.params.id, (resData) => {\n        logger.info('acknowledged from CHECK ROOM event', resData);\n        const { room, queuedUsers, error } = resData;\n\n        if (room && !error) {\n          setRoom(room);\n          setQueuedUsers(queuedUsers);\n        } else {\n          logger.error(error);\n          setRoomError('sorry room doesn\\'t exist...');\n        }\n      });\n    }\n  }, [match, room]);\n\n  return (\n    <>\n      <NavHeader />\n      <Switch className=\"mt-4\">\n        <Route path=\"/room/:id\">\n          {roomError ?\n            <Error text={roomError}/>\n            : room ?\n              <Room\n                room={room}\n                queuedUsers={queuedUsers}\n                setQueuedUsers={setQueuedUsers}\n                isAdmin={isAdmin}\n                setIsAdmin={setIsAdmin}\n              />\n              : // room is loading\n              <div className=\"my-5 text-center\">\n                <Spinner className=\"my-5\" animation=\"border\" role=\"status\">\n                  <span className=\"sr-only\">Loading...</span>\n                </Spinner>\n              </div>\n          }\n        </Route>\n        <Route exact path=\"/\">\n          <Home\n            setIsAdmin={setIsAdmin}\n            setRoom={setRoom}\n            setRoomError={setRoomError}\n          />\n        </Route>\n        <Route>\n          <Error text=\"404 resource not found\"/>\n        </Route>\n      </Switch>\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nimport {\n  BrowserRouter as Router\n} from 'react-router-dom';\n\nReactDOM.render(\n  <Router>\n    <App />\n  </Router>,\n  document.getElementById('root')\n);\n\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RDQxOEI0NzM3NDlBMTFFMTk1RDhCRjg3NzZFMkRGMjMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RDQxOEI0NzQ3NDlBMTFFMTk1RDhCRjg3NzZFMkRGMjMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpENDE4QjQ3MTc0OUExMUUxOTVEOEJGODc3NkUyREYyMyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpENDE4QjQ3Mjc0OUExMUUxOTVEOEJGODc3NkUyREYyMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ph2iTEwAAAGJSURBVHjatFbBcYMwEBSEAsiXV0ogwydPpwPTgd0BVMCkAruDuAOnA7sBZsgvT//40oFzx6wyZwfQacA7cyMBkvZuTzoRGEKWZWtqdmQvZhp7so+6rjvjiQAkR485Ddm7L1mESOwC7O2XeQAiIdcoyRLSsnRX7tDHYIJktrSRYqJKWnKowNiU7ETPN2ThFAMNjjXSCkcsLFmsIpJwbRL6fr57dUMWOiZ3MzdbT+YVkRJDjqUU1S5akoUUeBb5XVHDVpEVoXkQkLO9z/Z2grxPsbVXkC9nIs4xfTOL5AgkJyTeRvDvgC8hHZ+zHNWgpPZAFg/VujmRHMWB3kKmDdl5ESIhV08Asli8K2cT3ZEc0F5ETWQJm9EcoUpr8LcgIvmEdWMkluiCfqUk4y18wIIlCNlex0isdCWS2ifX7vuJO4o934jEG83VHqIq5yIyF3K0hbjkGufPiSL5V0vg+z8hb2fNgfXNYX9hYmxl1wh8vJqB/Mk1om3bnyRJvqn7NlRaFGpsWfJfAQYApiSqoZCrNjYAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAsQAAALEBxi1JjQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAEDSURBVEiJ7dUxSgNBGAXgz6xF0FMogkfYLt5DwXPkCt5Gu1RaRLHUWIhE+5xAmyzGIrvJn3WJuzCChQ9+mNnZ997P/2CGfyTGHcZdCL2OBp9YdOT8HWSW4xmX6+Q4txzPoly3RpvgMrwEg1fsttHtaRfcGY7D/ginP3A2dG/wgLzhxwxT6+6rmmrOIscjruPHWUkqcIF+OIuzr1fMol9yi/JsFg2uasQ3DHyffb2qLHI8184uo8GwgVxgtEW8qlHoOtYwGpy0EOpag2iwh3lC8Tn2Wd9FH3iSDhO8RwO4T2iw0vp1g4hD6TI4SNjsduzU9qkek5Vu1xetM+oGtwk0N67+L1rnk7tG6M07AAAAAElFTkSuQmCC\""],"sourceRoot":""}
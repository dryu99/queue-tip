(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{123:function(e,t){},132:function(e,t,a){},133:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),l=a.n(c),o=a(9),m=a(142),i=a(6),u=a(138),s=a(144),E=a(80),d=a(148),A=function(){},f=function(){var e;(e=console).error.apply(e,arguments)},v=a(78),g=a.n(v)()(),N=Object.freeze({JOIN:"join",CREATE_ROOM:"create_room",DISCONNECT:"disconnect",ROOM_CHECK:"room_check",ENQUEUE:"enqueue",DEQUEUE:"dequeue",TRY_ADMIN_STATUS:"try_admin_status"}),b=g,p=function(e){var t=e.setIsAdmin,a=e.setRoom,c=e.setRoomError,l=Object(n.useState)(""),m=Object(o.a)(l,2),v=m[0],b=m[1],p=Object(n.useState)(""),O=Object(o.a)(p,2),R=O[0],j=O[1],h=Object(n.useState)(""),y=Object(o.a)(h,2),w=y[0],C=y[1],U=Object(i.f)();return r.a.createElement(u.a,{className:"mt-4"},r.a.createElement(s.a,null,r.a.createElement(s.a.Row,{className:"justify-content-center mb-3"},r.a.createElement(E.a,{xs:"auto"},r.a.createElement(s.a.Label,null,"Room Name"),r.a.createElement(s.a.Control,{value:v,onChange:function(e){return b(e.target.value)},placeholder:"CPSC 110 Office Hours"}))),r.a.createElement(s.a.Row,{className:"justify-content-center mb-3"},r.a.createElement(E.a,{xs:"auto"},r.a.createElement(s.a.Label,null,"Admin Password"),r.a.createElement(s.a.Control,{value:R,onChange:function(e){return j(e.target.value)}}))),r.a.createElement(s.a.Row,{className:"justify-content-center mb-2"},r.a.createElement(E.a,{xs:"auto"},r.a.createElement(s.a.Text,{className:"text-muted"},w))),r.a.createElement(s.a.Row,{className:"justify-content-center"},r.a.createElement(E.a,{xs:"auto"},r.a.createElement(d.a,{onClick:function(e){var n,r;e.preventDefault(),0===v.trim().length?C("Please type in a room name!"):0===R.trim().length?C("Please type in an admin password!"):(t(!0),A("emitting room creation event"),n={name:v,adminPassword:R},r=function(e){var t=e.room,n=e.error;t&&!n?(a(t),U.push("/room/".concat(t.id))):(f(n),c("Sorry room doesn't exist..."))},g.emit(N.CREATE_ROOM,n,r))},variant:"primary",type:"submit"},"Create Room")))))},O=a(147),R=a(139),j=function(e){var t=e.children,a=e.placement,n=e.text;return r.a.createElement(O.a,{placement:a,overlay:r.a.createElement(R.a,null,n)},t)},h=a(82),y=a.n(h),w=function(e){var t=e.room;return r.a.createElement("div",null,r.a.createElement("h1",{className:"d-inline-block"},t.name),r.a.createElement(j,{text:"copy url"},r.a.createElement("img",{id:"copy-link-icon",className:"align-baseline mx-2",src:y.a,alt:"copy-link-icon",onClick:function(){var e=document.createElement("textarea");document.body.appendChild(e),e.value=window.location.href,e.select(),document.execCommand("copy"),document.body.removeChild(e)}})))},C=a(140),U=a(141),I=a(83),k=a.n(I),S=function(e){var t=e.currentName,a=e.setCurrentName,n=e.isAdmin,c=e.setAdminPopupOpen,l=e.queuedUsers,o=e.room,m=function(e){var a,n;(e.preventDefault(),0===t.trim().length)?alert("Name can't be empty if you want to join queue! Please type something in."):l.find((function(e){return e.name.toLowerCase()===t.toLowerCase()}))?alert("You're already in queue! Can't join again."):(a={name:t,roomId:o.id},n=function(e){A("acknowledged from ENQUEUE event",e),A("caching current user data...");var a=JSON.stringify({value:t});localStorage.setItem("currentNameData",a)},g.emit(N.ENQUEUE,a,n))};return r.a.createElement(u.a,{className:"my-4"},r.a.createElement(C.a,null,r.a.createElement(E.a,null,r.a.createElement(s.a,{onSubmit:m,inline:!0},r.a.createElement(U.a,{className:"pt-1"},r.a.createElement(U.a.Prepend,null,r.a.createElement(U.a.Text,null,"Name")),r.a.createElement(s.a.Control,{value:t,onChange:function(e){return a(e.target.value)},placeholder:"Mr. Recursion"}),r.a.createElement(j,{text:n?"you're admin!":"make admin"},r.a.createElement("img",{id:"crown-icon",className:"align-baseline mx-2 ",style:{opacity:n?1:null},src:k.a,alt:"crown-icon",onClick:n?null:function(){return c(!0)}}))))),r.a.createElement(E.a,{xs:"auto"},r.a.createElement(d.a,{onClick:m,size:"lg",block:!0},"Join Queue"))))},D=a(145),M=function(e){var t=e.user;return r.a.createElement("span",null,t.name)},x=function(e){var t=e.room,a=e.isAdmin,n=e.queuedUsers,c=e.currentName,l=function(e,a){var n,r;n={username:a,roomId:t.id},r=function(e){A("DEQUEUE event acknowledged",e)},g.emit(N.DEQUEUE,n,r)};return r.a.createElement("div",null,r.a.createElement("h4",null,"Queue"),r.a.createElement(D.a,null,n.map((function(e,t){var n={variant:c===e.name?"primary":null,action:!!a,onClick:a?function(t){return l(0,e.name)}:null};return r.a.createElement(u.a,{key:e.name},r.a.createElement(C.a,{className:"align-items-center"},r.a.createElement(E.a,{xs:"auto"},r.a.createElement("b",null,t+1)),r.a.createElement(E.a,null,r.a.createElement(D.a.Item,n,r.a.createElement(M,{user:e})))))}))))},G=a(143),Z=function(e){var t=e.show,a=e.setAdminPopupOpen,c=e.setIsAdmin,l=e.room,m=Object(n.useState)(""),i=Object(o.a)(m,2),u=i[0],E=i[1],v=Object(n.useState)(""),b=Object(o.a)(v,2),p=b[0],O=b[1],R=r.a.createRef();Object(n.useEffect)((function(){R.current&&R.current.focus()}),[R]);var j=function(){E(""),O(""),a(!1)},h=function(e){var t,a;e.preventDefault(),t={adminPassword:u,roomId:l.id},a=function(e){A("acknowledged from TRY ADMIN STATUS event",e),e.error?(f(e.error),O("Password is incorrect! Please try again.")):(c(!0),j())},g.emit(N.TRY_ADMIN_STATUS,t,a)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(G.a,{show:t,onHide:j},r.a.createElement(G.a.Body,null,r.a.createElement(s.a,{onSubmit:h},r.a.createElement(s.a.Row,{className:"mb-2"},r.a.createElement(s.a.Label,null,"Admin Password"),r.a.createElement(s.a.Control,{ref:R,value:u,onChange:function(e){return E(e.target.value)},type:"password"}))),r.a.createElement(s.a.Row,{className:"justify-content-center"},r.a.createElement(s.a.Text,{className:"text-muted"},p))),r.a.createElement(G.a.Footer,null,r.a.createElement(d.a,{variant:"secondary",onClick:j},"Close"),r.a.createElement(d.a,{variant:"primary",onClick:h},"Submit"))))},T=(a(132),function(e){var t=e.isAdmin,a=e.setIsAdmin,c=e.room,l=e.queuedUsers,m=e.setQueuedUsers,i=Object(n.useState)(""),s=Object(o.a)(i,2),E=s[0],d=s[1],f=Object(n.useState)(!1),v=Object(o.a)(f,2),p=v[0],O=v[1];return Object(n.useEffect)((function(){return b.on(N.ENQUEUE,(function(e){var t=e.enqueuedUser;A("received ENQUEUE event",t),m(l.concat(t))})),b.on(N.DEQUEUE,(function(e){var t=e.dequeuedUser;A("received DEQUEUE event",t),m(l.filter((function(e){return e.name!==t.name})))})),function(){b.emit(N.DISCONNECT),b.off()}}),[l,c]),Object(n.useEffect)((function(){var e,t;e={roomId:c.id},t=function(e){A("acknowledged from JOIN event",e)},g.emit(N.JOIN,e,t)}),[c]),Object(n.useEffect)((function(){A("checking local cache for signed in user data...");var e=localStorage.getItem("currentNameData");if(e){A("found data in local cache!");var t=JSON.parse(e);A(t),t.value&&d(t.value)}}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{className:"mt-4"},r.a.createElement(w,{room:c}),r.a.createElement("hr",null),r.a.createElement(S,{currentName:E,setCurrentName:d,isAdmin:t,setAdminPopupOpen:O,room:c,queuedUsers:l}),r.a.createElement("hr",null),r.a.createElement(x,{room:c,isAdmin:t,currentName:E,queuedUsers:l})),r.a.createElement(Z,{show:p,room:c,setIsAdmin:a,setAdminPopupOpen:O}))}),Y=function(e){var t=e.text;return r.a.createElement("div",{className:"mt-5"},r.a.createElement("h2",{className:"text-center"},t))},J=a(146),Q=function(){return r.a.createElement(J.a,{className:"",bg:"dark",variant:"dark"},r.a.createElement(J.a.Brand,{className:"mr-auto",href:"/"},"Queue-Tip"),r.a.createElement("small",{className:"text-muted"},r.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Daniel_(Elton_John_song)"},"Daniel Ryu")," 2020"))};var L=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),u=Object(o.a)(l,2),s=u[0],E=u[1],d=Object(n.useState)(null),v=Object(o.a)(d,2),b=v[0],O=v[1],R=Object(n.useState)(!1),j=Object(o.a)(R,2),h=j[0],y=j[1],w=Object(i.g)("/room/:id");return Object(n.useEffect)((function(){var e,t;w&&!a&&(A("emitting room check event"),e=w.params.id,t=function(e){A("acknowledged from CHECK ROOM event",e);var t=e.room,a=e.queuedUsers,n=e.error;t&&!n?(c(t),E(a)):(f(n),O("sorry room doesn't exist..."))},g.emit(N.ROOM_CHECK,{roomId:e},t))}),[w,a]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,null),r.a.createElement(i.c,{className:"mt-4"},r.a.createElement(i.a,{path:"/room/:id"},b?r.a.createElement(Y,{text:b}):a?r.a.createElement(T,{room:a,queuedUsers:s,setQueuedUsers:E,isAdmin:h,setIsAdmin:y}):r.a.createElement("div",{className:"my-5 text-center"},r.a.createElement(m.a,{className:"my-5",animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))),r.a.createElement(i.a,{exact:!0,path:"/"},r.a.createElement(p,{setIsAdmin:y,setRoom:c,setRoomError:O})),r.a.createElement(i.a,null,r.a.createElement(Y,{text:"404 resource not found"}))))},V=a(41);l.a.render(r.a.createElement(V.a,null,r.a.createElement(L,null)),document.getElementById("root"))},82:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RDQxOEI0NzM3NDlBMTFFMTk1RDhCRjg3NzZFMkRGMjMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RDQxOEI0NzQ3NDlBMTFFMTk1RDhCRjg3NzZFMkRGMjMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpENDE4QjQ3MTc0OUExMUUxOTVEOEJGODc3NkUyREYyMyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpENDE4QjQ3Mjc0OUExMUUxOTVEOEJGODc3NkUyREYyMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ph2iTEwAAAGJSURBVHjatFbBcYMwEBSEAsiXV0ogwydPpwPTgd0BVMCkAruDuAOnA7sBZsgvT//40oFzx6wyZwfQacA7cyMBkvZuTzoRGEKWZWtqdmQvZhp7so+6rjvjiQAkR485Ddm7L1mESOwC7O2XeQAiIdcoyRLSsnRX7tDHYIJktrSRYqJKWnKowNiU7ETPN2ThFAMNjjXSCkcsLFmsIpJwbRL6fr57dUMWOiZ3MzdbT+YVkRJDjqUU1S5akoUUeBb5XVHDVpEVoXkQkLO9z/Z2grxPsbVXkC9nIs4xfTOL5AgkJyTeRvDvgC8hHZ+zHNWgpPZAFg/VujmRHMWB3kKmDdl5ESIhV08Asli8K2cT3ZEc0F5ETWQJm9EcoUpr8LcgIvmEdWMkluiCfqUk4y18wIIlCNlex0isdCWS2ifX7vuJO4o934jEG83VHqIq5yIyF3K0hbjkGufPiSL5V0vg+z8hb2fNgfXNYX9hYmxl1wh8vJqB/Mk1om3bnyRJvqn7NlRaFGpsWfJfAQYApiSqoZCrNjYAAAAASUVORK5CYII="},83:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAsQAAALEBxi1JjQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAEDSURBVEiJ7dUxSgNBGAXgz6xF0FMogkfYLt5DwXPkCt5Gu1RaRLHUWIhE+5xAmyzGIrvJn3WJuzCChQ9+mNnZ997P/2CGfyTGHcZdCL2OBp9YdOT8HWSW4xmX6+Q4txzPoly3RpvgMrwEg1fsttHtaRfcGY7D/ginP3A2dG/wgLzhxwxT6+6rmmrOIscjruPHWUkqcIF+OIuzr1fMol9yi/JsFg2uasQ3DHyffb2qLHI8184uo8GwgVxgtEW8qlHoOtYwGpy0EOpag2iwh3lC8Tn2Wd9FH3iSDhO8RwO4T2iw0vp1g4hD6TI4SNjsduzU9qkek5Vu1xetM+oGtwk0N67+L1rnk7tG6M07AAAAAElFTkSuQmCC"},88:function(e,t,a){e.exports=a(133)}},[[88,1,2]]]);
//# sourceMappingURL=main.f8e4cb60.chunk.js.map
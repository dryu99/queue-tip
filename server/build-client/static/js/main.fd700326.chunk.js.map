{"version":3,"sources":["types.js","utils/logger.js","socket.js","components/Home.js","components/SignIn.js","components/User.js","components/Queue.js","components/AdminPopover.js","components/AdminPopoverWrapper.js","components/Users.js","components/Room.js","components/Error.js","App.js","index.js"],"names":["UserTypes","Object","freeze","ADMIN","BASIC","info","console","error","socket","io","emitDequeue","data","callback","emit","SocketEvents","DEQUEUE","JOIN","CREATE_ROOM","DISCONNECT","LEAVE","NEW_USER_JOIN","ROOM_CHECK","ENQUEUE","UPDATE_USER","Home","setCurrentUserType","setRoom","setRoomError","useState","newRoomName","setNewRoomName","alertText","setAlertText","history","useHistory","Container","className","Form","Row","Col","xs","Label","Control","value","onChange","e","target","placeholder","Text","Button","onClick","newRoom","preventDefault","trim","logger","name","resData","room","push","id","variant","type","SignIn","user","setUser","addNewUser","addNewQueueUser","newName","setNewName","nameInputRef","React","createRef","useEffect","ReactDOM","findDOMNode","current","focus","ref","roomId","usersInRoom","usersInQueue","User","isCurrentUser","isAdmin","colourClass","Queue","queueUsers","removeQueueUser","setInQueue","ListGroup","map","qu","i","listItemProps","action","userId","dequeuedUser","key","Item","AdminPopover","props","makeAdmin","Popover","Content","AdminPopoverWrapper","children","OverlayTrigger","rootClose","trigger","placement","overlay","Users","users","length","u","listItem","Room","setUsers","setQueueUsers","inQueue","on","newUser","leftUser","removeUser","enqueuedUser","updatedUser","replaceUser","off","concat","filter","newQueueUser","index","findIndex","usersCopy","splice","isUserSignedIn","Fragment","dummy","document","createElement","body","appendChild","window","location","href","select","execCommand","removeChild","size","block","userToUpdate","reqData","Error","text","App","currentUser","setCurrentUser","roomError","match","useRouteMatch","params","path","exact","render","getElementById"],"mappings":"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","file":"static/js/main.fd700326.chunk.js","sourcesContent":["export const UserTypes = Object.freeze({\n  ADMIN: 'admin',\n  BASIC: 'basic'\n});\n","const info = (...params) => {\n  // eslint-disable-next-line no-undef\n  if (process.env.NODE_ENV === 'development') {\n    console.log(...params);\n  }\n};\n\nconst event = (...params) => {\n  info('<EV> ', params);\n};\n\nconst error = (...params) => {\n  console.error(...params);\n};\n\nexport default { info, event, error };","import io from 'socket.io-client';\n\nconst socket = io();\n\nexport const emitCreateRoom = (newRoom, callback) => {\n  socket.emit(SocketEvents.CREATE_ROOM, newRoom, callback);\n};\n\nexport const emitCheckRoom = (roomId, callback) => {\n  socket.emit(SocketEvents.ROOM_CHECK, { roomId }, callback);\n};\n\nexport const emitEnqueue = (data, callback) => {\n  socket.emit(SocketEvents.ENQUEUE, data, callback);\n};\n\nexport const emitDequeue = (data, callback) => {\n  socket.emit(SocketEvents.DEQUEUE, data, callback);\n};\n\nexport const emitJoin = (data, callback) => {\n  socket.emit(SocketEvents.JOIN, data, callback);\n};\n\nexport const SocketEvents = Object.freeze({\n  JOIN: 'join',\n  CREATE_ROOM: 'create_room',\n  DISCONNECT: 'disconnect',\n  LEAVE: 'leave',\n  NEW_USER_JOIN: 'new_user_join',\n  ROOM_CHECK: 'room_check',\n  ENQUEUE: 'enqueue',\n  DEQUEUE: 'dequeue',\n  UPDATE_USER: 'update_user'\n});\n\nexport default socket;","import React, { useState } from 'react';\nimport { Button, Container, Form, Col } from 'react-bootstrap';\nimport { useHistory } from 'react-router-dom';\nimport { UserTypes } from '../types';\nimport logger from '../utils/logger';\n\nimport { emitCreateRoom } from '../socket';\n\nconst Home = ({ setCurrentUserType, setRoom, setRoomError }) => {\n  const [newRoomName, setNewRoomName] = useState('');\n  const [alertText, setAlertText] = useState('');\n\n  const history = useHistory();\n\n  const handleCreateRoomClick = (e) => {\n    e.preventDefault();\n\n    if (newRoomName && newRoomName.trim() !== '') {\n      // users who create rooms are admins\n      setCurrentUserType(UserTypes.ADMIN);\n\n      // create room on server, set room on client and enter room if it does\n      logger.info('emitting room creation event');\n      emitCreateRoom({ name: newRoomName }, (resData) => {\n        const { room, error } = resData;\n\n        if (room && !error) {\n          setRoom(room);\n\n          // go to room url\n          history.push(`/room/${resData.room.id}`);\n        } else {\n          logger.error(error);\n          setRoomError('sorry room doesn\\'t exist...');\n        }\n      });\n    } else {\n      setAlertText('Room name can\\'t be empty!');\n    }\n  };\n\n  return (\n    <Container className=\"mt-4\">\n      <h1 className=\"text-center mb-5\">queue-tip</h1>\n      <Form>\n        <Form.Row className=\"justify-content-center mb-3\">\n          <Col xs=\"auto\">\n            <Form.Label>Room Name</Form.Label>\n            <Form.Control\n              value={newRoomName}\n              onChange={(e) => setNewRoomName(e.target.value)}\n              placeholder=\"CPSC 110 Office Hours\"\n            />\n          </Col>\n        </Form.Row>\n        <Form.Row className=\"justify-content-center mb-2\">\n          <Col xs=\"auto\">\n            <Form.Text className=\"text-muted\">\n              {alertText}\n            </Form.Text>\n          </Col>\n        </Form.Row>\n        <Form.Row className=\"justify-content-center\">\n          <Col xs=\"auto\">\n            <Button onClick={handleCreateRoomClick} variant=\"primary\" type=\"submit\">Create Room</Button>\n          </Col>\n        </Form.Row>\n      </Form>\n    </Container>\n  );\n};\n\nexport default Home;","import React, { useState, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport { Button, Container, Form, Col } from 'react-bootstrap';\nimport { emitJoin } from '../socket';\nimport logger from '../utils/logger';\n\nconst SignIn = ({ user, room, setUser, addNewUser, addNewQueueUser }) => {\n  const [newName, setNewName] = useState('');\n  const [alertText, setAlertText] = useState('');\n\n  // keep track of input component so we can focus on it\n  const nameInputRef = React.createRef();\n\n  // if popup is visible, focus on name input component\n  useEffect(() => {\n    // eslint-disable-next-line react/no-find-dom-node\n    ReactDOM.findDOMNode(nameInputRef.current).focus();\n\n  }, [nameInputRef]);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    if (newName.trim() !== '') {\n      emitJoin({ name: newName, type: user.type, roomId: room.id }, (resData) => {\n        const { user, usersInRoom, usersInQueue, error } = resData;\n        logger.info('acknowledged from JOIN event', user);\n\n        if (!error) {\n          setUser(user);\n          addNewUser([...usersInRoom, user]);\n          addNewQueueUser(usersInQueue);\n        } else {\n          logger.error(error);\n          setAlertText('Name is already taken, please try something else.');\n        }\n      });\n    } else {\n      setAlertText('Your name can\\'t be empty!');\n    }\n  };\n\n  return (\n    <Container className=\"mt-4\">\n      <div className=\"text-center mb-4\">\n        <h1>Sign In</h1>\n        <h3><u>{room ? room.name : ''}</u></h3>\n      </div>\n      <Form>\n        <Form.Row className=\"justify-content-center mb-3\">\n          <Col xs=\"auto\">\n            <Form.Label>Your Name</Form.Label>\n            <Form.Control\n              ref={nameInputRef}\n              value={newName}\n              onChange={(e) => setNewName(e.target.value)}\n              placeholder=\"Bobby\"\n            />\n          </Col>\n        </Form.Row>\n        <Form.Row className=\"justify-content-center mb-2\">\n          <Col xs=\"auto\">\n            <Form.Text className=\"text-muted\">\n              {alertText}\n            </Form.Text>\n          </Col>\n        </Form.Row>\n        <Form.Row className=\"justify-content-center\">\n          <Col xs=\"auto\">\n            <Button\n              onClick={handleSubmit}\n              variant=\"primary\"\n              type=\"submit\"\n            >\n              Enter Room\n            </Button>\n          </Col>\n        </Form.Row>\n      </Form>\n    </Container>\n  );\n};\n\nexport default SignIn;","import React from 'react';\nimport { UserTypes } from '../types';\n\nconst User = ({ user, isCurrentUser }) => {\n  const isAdmin = user.type === UserTypes.ADMIN;\n  const colourClass = isAdmin\n    ? 'text-danger'\n    : isCurrentUser\n      ? 'text-primary'\n      : '';\n\n  return (\n    <span className={colourClass}>\n      {user.name} {isAdmin ? '(admin)' : ''}\n    </span>\n  );\n};\n\nexport default User;","import React from 'react';\nimport { Row, Col, Container, ListGroup } from 'react-bootstrap';\nimport { UserTypes } from '../types';\nimport User from './User';\nimport { emitDequeue } from '../socket';\nimport logger from '../utils/logger';\n\nconst Queue = ({ room, user, queueUsers, removeQueueUser, setInQueue }) => {\n\n  const removeUserFromQueue = (e, userId) => {\n    emitDequeue({ userId, roomId: room.id }, (data) => {\n      logger.info('acknowledged from DEQUEUE event', data.dequeuedUser);\n      removeQueueUser(data.dequeuedUser.id);\n\n      if (data.dequeuedUser.id === user.id) {\n        setInQueue(false);\n      }\n    });\n  };\n\n  return (\n    <div >\n      <h4>Queue</h4>\n      <ListGroup>\n        {queueUsers.map((qu, i) => {\n          const isCurrentUser = user.name === qu.name;\n          const isAdmin = user.type === UserTypes.ADMIN;\n\n          const listItemProps = {\n            // variant: isCurrentUser ? 'secondary' : null,\n            action: isAdmin ? true : false,\n            onClick: isAdmin ? (e) => removeUserFromQueue(e, qu.id) : null\n          };\n\n          return (\n            <Container key={qu.id}>\n              <Row className=\"align-items-center\">\n                <Col xs=\"auto\">\n                  <b>{i + 1}</b>\n                </Col>\n                <Col>\n                  <ListGroup.Item {...listItemProps}>\n                    <User user={qu} isCurrentUser={isCurrentUser}/>\n                  </ListGroup.Item>\n                </Col>\n              </Row>\n            </Container>\n          );\n        })}\n      </ListGroup>\n    </div>\n  );\n};\n\nexport default Queue;\n\n","import React from 'react';\nimport { ListGroup, Popover } from 'react-bootstrap';\n\nconst AdminPopover = (props) => {\n  const { makeAdmin, user } = props;\n\n  // these props shouldn't be passed to Popover\n  delete props.makeAdmin;\n  delete props.user;\n\n  const handleMakeAdminClick = () => {\n    makeAdmin(user);\n  };\n\n  return (\n    <Popover {...props}>\n      <Popover.Content>\n        <ListGroup variant=\"flush\">\n          <ListGroup.Item action onClick={handleMakeAdminClick}>Make Admin</ListGroup.Item>\n        </ListGroup>\n      </Popover.Content>\n    </Popover>\n  );\n};\n\nexport default AdminPopover;","import React from 'react';\nimport { OverlayTrigger } from 'react-bootstrap';\nimport AdminPopover from './AdminPopover';\n\nconst AdminPopoverWrapper = ({ children, ...props }) => {\n  return (\n    <OverlayTrigger rootClose trigger=\"click\" placement=\"left\" overlay={AdminPopover(props)}>\n      {children}\n    </OverlayTrigger>\n  );\n};\n\nexport default AdminPopoverWrapper;","import React from 'react';\nimport { ListGroup } from 'react-bootstrap';\nimport User from './User';\nimport PopoverWrapper from './AdminPopoverWrapper';\nimport { UserTypes } from '../types';\n\nconst Users = ({ user, users, makeAdmin }) => {\n  return (\n    <div>\n      <h4>Users: {users.length}</h4>\n      <ListGroup>\n        {users.map(u => {\n          const isCurrentUser = user.name === u.name;\n          const isAdmin = user.type === UserTypes.ADMIN;\n\n          const listItemProps = {\n            action: isAdmin ? true : false,\n          };\n\n          const listItem = (\n            <ListGroup.Item key={u.id} {...listItemProps}>\n              <User user={u} isCurrentUser={isCurrentUser}/>\n            </ListGroup.Item>\n          );\n\n          return (\n            isAdmin ?\n              <PopoverWrapper key={u.id} makeAdmin={makeAdmin} user={u}>\n                {listItem}\n              </PopoverWrapper>\n              :\n              listItem\n          );\n        })}\n      </ListGroup>\n    </div>\n  );\n};\n\nexport default Users;","import React, { useState, useEffect } from 'react';\nimport { Col, Container, Row, Button } from 'react-bootstrap';\nimport socket, { SocketEvents, emitEnqueue, emitDequeue } from '../socket';\nimport logger from '../utils/logger';\n\nimport SignIn from './SignIn';\nimport Queue from './Queue';\nimport Users from './Users';\nimport { UserTypes } from '../types';\n\nconst Room = ({ room, user, setUser }) => {\n  const [users, setUsers] = useState([]);\n  const [queueUsers, setQueueUsers] = useState([]);\n  const [inQueue, setInQueue] = useState(false);\n\n  // subscribe to relevant socket events\n  useEffect(() => {\n    // when another user joins, add them to user list\n    socket.on(SocketEvents.NEW_USER_JOIN, ({ newUser }) => {\n      logger.info('received JOIN event', newUser);\n      addNewUser(newUser);\n    });\n\n    // when another user leaves, remove them from user list\n    socket.on(SocketEvents.LEAVE, ({ leftUser }) => {\n      logger.info('received LEAVE event', leftUser);\n      removeUser(leftUser.id);\n      removeQueueUser(leftUser.id);\n    });\n\n    // when another user joins queue, add them to queue list\n    socket.on(SocketEvents.ENQUEUE, ({ enqueuedUser }) => {\n      logger.info('received ENQUEUE event', enqueuedUser);\n      addNewQueueUser(enqueuedUser);\n    });\n\n    // when another user joins queue, add them to queue list\n    socket.on(SocketEvents.DEQUEUE, ({ dequeuedUser }) => {\n      logger.info('received DEQUEUE event', dequeuedUser);\n      removeQueueUser(dequeuedUser.id);\n\n      if (dequeuedUser.id === user.id) {\n        setInQueue(false);\n      }\n    });\n\n    // when another user gets updated, replace their status in your list.\n    socket.on(SocketEvents.UPDATE_USER, ({ updatedUser }) => {\n      logger.info('received UPDATE_USER event', updatedUser);\n      replaceUser(updatedUser);\n\n      // If current user is the one who got updated, update that state too.\n      if (updatedUser.id === user.id) {\n        setUser(updatedUser);\n      }\n    });\n\n    // on component unmount, disconnect and turn off socket\n    return () => {\n      socket.emit(SocketEvents.DISCONNECT);\n      socket.off();\n    };\n  }, [users, queueUsers]);\n\n  const addNewUser = (newUser) => {\n    setUsers(users.concat(newUser));\n  };\n\n  const removeUser = (id) => {\n    setUsers(users.filter(u => u.id !== id));\n  };\n\n  const addNewQueueUser = (newQueueUser) => {\n    setQueueUsers(queueUsers.concat(newQueueUser));\n  };\n\n  const removeQueueUser = (id) => {\n    setQueueUsers(queueUsers.filter(u => u.id !== id));\n  };\n\n  const replaceUser = (updatedUser) => {\n    const index = users.findIndex(u => u.id === updatedUser.id);\n    if (index !== -1) {\n      const usersCopy = [...users];\n\n      // replace updated user at specified index\n      usersCopy.splice(index, 1, updatedUser);\n\n      setUsers(usersCopy);\n    } else {\n      logger.error(`couldn't find user ${updatedUser.name} so couldn't update them`);\n    }\n  };\n\n  const makeAdmin = (userToUpdate) => {\n    const reqData = {\n      ...userToUpdate,\n      type: UserTypes.ADMIN\n    };\n\n    socket.emit(SocketEvents.UPDATE_USER, reqData, (resData) => {\n      logger.info('acknowledged from UPDATE_USER event', resData);\n      const { updatedUser, error } = resData;\n\n      if (!error) {\n        replaceUser(updatedUser);\n      }\n    });\n  };\n\n\n  const copyLinkToClipboard = () => {\n    // TODO manipulating DOM here directly feels sketchy, doing it the react way doesn't work see comments below\n    var dummy = document.createElement('textarea');\n    document.body.appendChild(dummy);\n    dummy.value = window.location.href;\n    dummy.select();\n    document.execCommand('copy');\n    document.body.removeChild(dummy);\n  };\n\n  const handleQueueToggle = () => {\n    if (inQueue) {\n      emitDequeue({ userId: user.id, roomId: room.id }, (resData) => {\n        logger.info('acknowledged from DEQUEUE event', resData);\n        const { dequeuedUser, error } = resData;\n\n        if (!error) {\n          removeQueueUser(dequeuedUser.id);\n          setInQueue(false);\n        } else {\n          logger.error(error);\n        }\n      });\n    } else {\n      emitEnqueue({ userId: user.id, roomId: room.id }, (resData) => {\n        logger.info('acknowledged from ENQUEUE event', resData);\n        const { enqueuedUser, error } = resData;\n\n        if (!error) {\n          addNewQueueUser(enqueuedUser);\n          setInQueue(true);\n        } else {\n          logger.error(error);\n        }\n      });\n    }\n  };\n\n  // user is considered signed in when name and id exist\n  const isUserSignedIn = user && user.name && user.id;\n\n  return (\n    <Container className=\"mt-4\">\n      {room && isUserSignedIn ?\n        <React.Fragment>\n          <Row>\n            <Col>\n              <h1>{room.name}</h1>\n            </Col>\n            <Col xs=\"auto\">\n              <Button onClick={copyLinkToClipboard} size=\"lg\" variant=\"secondary\">\n                Copy Link\n              </Button>\n            </Col>\n            <Col xs=\"3\">\n              <Button onClick={handleQueueToggle} size=\"lg\" block>\n                {inQueue ? 'Leave Queue' : 'Join Queue'}\n              </Button>\n            </Col>\n          </Row>\n          <hr/>\n          <Row>\n            <Col>\n              <Queue\n                room={room}\n                user={user}\n                queueUsers={queueUsers}\n                removeQueueUser={removeQueueUser}\n                setInQueue={setInQueue}\n              />\n            </Col>\n            <Col xs=\"4\">\n              <Users\n                user={user}\n                users={users}\n                makeAdmin={makeAdmin}\n              />\n            </Col>\n          </Row>\n        </React.Fragment>\n        :\n        <SignIn\n          room={room}\n          user={user}\n          setUser={setUser}\n          addNewUser={addNewUser}\n          addNewQueueUser={addNewQueueUser}\n        />\n      }\n      {/* strangely enough, doing this doesn't work for copying to clipboard - setting display to none causes the copied value to be \"window.location.href\" */}\n      {/* <textarea ref={linkRef} style={{ display: 'none' }} value={window.location.href}/> */}\n    </Container>\n  );\n};\n\nexport default Room;","import React from 'react';\n\nconst Error = ({ text }) => {\n  return (\n    <div>\n      {text}\n    </div>\n  );\n};\n\nexport default Error;","import React, { useEffect, useState } from 'react';\nimport Home from './components/Home';\nimport Room from './components/Room';\nimport Error from './components/Error';\nimport logger from './utils/logger';\n\nimport {\n  Switch,\n  Route,\n  useRouteMatch\n} from 'react-router-dom';\n\nimport { emitCheckRoom } from './socket';\nimport { UserTypes } from './types';\n\nfunction App() {\n  const [currentUser, setCurrentUser] = useState({ type: UserTypes.BASIC });\n  const [room, setRoom] = useState(null);\n  const [roomError, setRoomError] = useState(null);\n\n  const match = useRouteMatch('/room/:id');\n\n  // if user entered via link, check to see if specified room id exists and init room\n  useEffect(() => {\n    if (match && !room) {\n      logger.info('emitting room check event');\n\n      // check to see if room exists on server, set room on client if it does\n      emitCheckRoom(match.params.id, (resData) => {\n        const { room, error } = resData;\n\n        logger.info('room event acknowledged', room);\n        if (room && !error) {\n          setRoom(room);\n        } else {\n          logger.error(error);\n          setRoomError('sorry room doesn\\'t exist...');\n        }\n      });\n    }\n  }, [match, room]);\n\n  const setCurrentUserType = (type) => {\n    setCurrentUser({ ...currentUser, type });\n  };\n\n  return (\n    <React.Fragment>\n      <Switch className=\"mt-4\">\n        <Route path=\"/room/:id\">\n          {!roomError ?\n            <Room room={room} user={currentUser} setUser={setCurrentUser}/>\n            :\n          // would be nice to put a spinner or sth here\n            <Error text={roomError}/>\n          }\n        </Route>\n        <Route exact path=\"/\">\n          <Home\n            setCurrentUserType={setCurrentUserType}\n            setRoom={setRoom}\n            setRoomError={setRoomError}\n          />\n        </Route>\n        <Route>\n          <Error text=\"404 resource not found\"/>\n        </Route>\n      </Switch>\n      {/* <Notification /> */}\n    </React.Fragment>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nimport {\n  BrowserRouter as Router\n} from 'react-router-dom';\n\nReactDOM.render(\n  <Router>\n    <App />\n  </Router>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}